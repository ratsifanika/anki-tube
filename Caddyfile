ankitube.vinatech.site {
    # Configuration automatique de HTTPS avec Let's Encrypt
    reverse_proxy app:8000
    
    # Headers de sécurité
    header {
        # Activer HSTS
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        # Empêcher le clickjacking
        X-Frame-Options "SAMEORIGIN"
        # Activer la protection XSS
        X-XSS-Protection "1; mode=block"
        # Empêcher le sniffing MIME
        X-Content-Type-Options "nosniff"
        # Politique de référent
        Referrer-Policy "strict-origin-when-cross-origin"
    }
    
    # Logs
    log {
        output file /var/log/caddy/access.log
    }
    
    # Compression
    encode gzip zstd
}